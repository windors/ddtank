<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<!--示例：-->
<!--<div th:replace="common/form :: form-default(${config}, ~{::row})">-->
<!--    <div th:fragment="row" class="col-md-offset-9 col-md-2">-->
<!--        <button class="btn btn-default" style="width: 100%" type="submit">保存</button>-->
<!--    </div>-->
<!--</div>-->
<div th:fragment="form-default(config, before, end)">
    <div class="col-md-9">
        <div th:if="*{before != null}">
            <div class="col-md-12">
                <div class="form-group" th:include="*{before}">
                </div>
            </div>
            <!--添加前置-->
        </div>
        <div class="col-md-12">
            <div class="form-group">
                <label class="col-md-2 control-label">检测图片路径</label>
                <div class="col-md-10">
                    <input class="form-control" name="picDir" th:value="${config.picDir}"/>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">自动重连网址</label>
                <div class="col-md-10">
                    <input class="form-control" name="website" th:value="${config.website}"/>
                </div>
            </div>
        </div>
        <h2 id="base">基础设置</h2>
        <hr/>
        <div class="col-md-12">
            <div class="form-group">
                <label class="col-md-2 control-label">选择副本</label>
                <div class="col-md-2">
                    <select class="form-control" name="levelLine">
                        <option value="1" th:selected="${config.levelLine == 1}">1 行</option>
                        <option value="2" th:selected="${config.levelLine == 2}">2 行</option>
                        <option value="3" th:selected="${config.levelLine == 3}">3 行</option>
                        <option value="4" th:selected="${config.levelLine == 4}">4 行</option>
                        <option value="5" th:selected="${config.levelLine == 5}">5 行</option>
                        <option value="6" th:selected="${config.levelLine == 6}">6 行</option>
                        <option value="7" th:selected="${config.levelLine == 7}">7 行</option>
                        <option value="8" th:selected="${config.levelLine == 8}">8 行</option>
                        <option value="9" th:selected="${config.levelLine == 9}">9 行</option>
                        <option value="10" th:selected="${config.levelLine == 10}">10 行</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <select class="form-control" name="levelRow">
                        <option value="1" th:selected="${config.levelRow == 1}">1 列</option>
                        <option value="2" th:selected="${config.levelRow == 2}">2 列</option>
                        <option value="3" th:selected="${config.levelRow == 3}">3 列</option>
                        <option value="4" th:selected="${config.levelRow == 4}">4 列</option>
                    </select>
                </div>
                <label class="col-md-2 control-label">结束等待时间</label>
                <div class="col-md-4">
                    <div class="input-group ">
                        <input type="text" class="form-control" name="levelEndWaitTime"
                               th:value="${config.levelEndWaitTime}">
                        <span class="input-group-addon">秒</span>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">副本模式</label>
                <div class="col-md-4">
                    <div class="slider-img" th:attr="slider-default=${config.levelMode}">
                        <img src="/static/img/副本模式.bmp"/>
                    </div>
                    <input type="hidden" name="levelMode" th:value="${config.levelMode}"/>
                </div>
                <label class="col-md-1 control-label">难度</label>
                <div class="col-md-5">
                    <div class="slider-img" th:attr="slider-default=${config.levelDifficulty}">
                        <img src="/static/img/副本难度.bmp" style="width: 100%"/>
                    </div>
                    <input type="hidden" name="levelDifficulty" th:value="${config.levelDifficulty}"/>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">技能</label>
                <div class="col-md-10">
                    <input class="form-control" type="text" name="attackSkill"
                           th:value="${config.attackSkill}"/>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">
                    角度修正
                </label>
                <div class="col-md-4">
                    <input class="form-control" type="text" name="offsetAngle"
                           th:value="${config.offsetAngle}"/>
                </div>
                <label class="col-md-2 control-label">
                    力度修正
                </label>
                <div class="col-md-4">
                    <input class="form-control" type="text" name="offsetStrength"
                           th:value="${config.offsetStrength}"/>
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-offset-2 col-md-3">
                    <div class="checkbox">
                        <label class="control-label">
                            <input type="checkbox" name="isThirdDraw" th:checked="${config.isThirdDraw}">
                            有钱，翻第三张牌！
                        </label>
                    </div>
                </div>
                <label class="col-md-2 control-label">
                    <div class="checkbox">
                        <input type="checkbox" name="isHandleAttack"
                               th:checked="${config.isHandleAttack}"><span>手动模式（暂不生效）</span>
                    </div>
                </label>
                <div class="col-md-5 input-group-fix">
                    <label>
                        <div class="input-group">
                            <input type="text" class="form-control" name="handleAngle"
                                   th:value="${config.handleAngle}">
                            <span class="input-group-addon">度</span>
                            <input type="text" class="form-control" name="handleStrength"
                                   th:value="${config.handleStrength}">
                            <span class="input-group-addon">力</span>
                        </div>
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">检测间隔</label>
                <div class="col-md-10">
                    <div class="slider">
                        <input id="delay" type="range" name="delay" th:value="${config.delay}" max="2000"/>
                    </div>
                </div>
            </div>
        </div>
        <h2 id="rectify">矫正设置</h2>
        <hr/>
        <h3 id="rectify-special">特殊</h3>
        <div class="col-md-12">
            <div class="form-group">
                <label class="col-md-2 control-label">攻击</label>
                <div class="col-md-3">
                    <div class="checkbox">
                        <label class="control-label">
                            <input type="checkbox" name="attackTurn" th:checked="${config.attackTurn}">
                            始终面向敌人
                        </label>
                    </div>
                </div>
                <label class="col-md-2 control-label">
                    <div class="checkbox">
                        <input type="checkbox" name="aftertreatment"
                               th:checked="${config.aftertreatment}"><span>变角</span>
                    </div>
                </label>
                <div class="col-md-5 input-group-fix">
                    <label>
                        <div class="input-group">
                            <span class="input-group-addon">每秒</span>
                            <input type="text" class="form-control" name="aftertreatmentSec"
                                   th:value="${config.aftertreatmentSec}">
                            <span class="input-group-addon">次</span>
                            <input type="text" class="form-control" name="aftertreatmentStr"
                                   th:value="${config.aftertreatmentStr}">
                        </div>
                    </label>
                </div>
            </div>
        </div>
        <h3 id="rectify-unitDistance">屏距</h3>
        <div class="col-md-12">
            <div class="form-group">
                <label class="col-md-2 control-label radio">
                    <input type="radio" name="isHandleCalcDistance" value="false"
                           th:checked="${!config.isHandleCalcDistance}"/>
                    自动模式
                </label>
                <div class="col-md-10">
                    <label class="control-label">
                        <input type="checkbox" name="isCalcDistanceQuickly"
                               th:checked="${config.isCalcDistanceQuickly}"> 进房就测量屏距（不勾选默认出手时才测量）
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label radio">
                    <input type="radio" name="isHandleCalcDistance" value="true"
                           th:checked="${config.isHandleCalcDistance}"/>
                    手动模式
                </label>
                <div class="col-md-10">
                    <div class="input-group">
                        <span class="input-group-addon">小地图1距的距离：</span>
                        <input type="text" class="form-control" name="handleDistance"
                               th:value="${config.handleDistance}">
                        <span class="input-group-addon">px</span>
                    </div>
                </div>
            </div>
        </div>
        <h3 id="rectify-angle">角度</h3>
        <div class="col-md-12">
            <div class="form-group">
                <label class="col-md-2 control-label">
                    特殊选项
                </label>
                <!--TODO 与手动打法冲突，待添加提示-->
                <div class="col-md-3">
                    <div class="checkbox">
                        <label class="control-label">
                            <input type="checkbox" name="isClosestAngle" th:checked="${config.isClosestAngle}">
                            临近角度打法
                        </label>
                    </div>
                </div>
                <label class="col-md-2 control-label">
                    <div class="checkbox">
                        <input type="checkbox" name="isFixedAngle" th:checked="${config.isFixedAngle}">
                        <span>固定角度打法</span>
                    </div>
                </label>
                <div class="col-md-3">
                    <select class="form-control" name="fixedAngle">
                        <option value="20" th:selected="${config.fixedAngle == 20}">20度</option>
                        <option value="30" th:selected="${config.fixedAngle == 30}">30度</option>
                        <option value="35" th:selected="${config.fixedAngle == 35}">35度</option>
                        <option value="40" th:selected="${config.fixedAngle == 40}">40度</option>
                        <option value="45" th:selected="${config.fixedAngle == 45}">45度</option>
                        <option value="50" th:selected="${config.fixedAngle == 50}">50度</option>
                        <option value="65" th:selected="${config.fixedAngle == 65}">65度</option>
                        <option value="70" th:selected="${config.fixedAngle == 70}">70度</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">
                    角度误差
                </label>
                <div class="col-md-10">
                    <input class="form-control" type="text" name="angleMis" th:value="${config.angleMis}"/>
                </div>
            </div>
        </div>
        <h3 id="rectify-identify">识别</h3>
        <div class="col-md-12">
            <div class="form-group">
                <label class="col-md-2 control-label">
                    敌人扫描模式
                </label>
                <div class="col-md-10">
                    <select class="form-control" name="enemyFindMode">
                        <option value="0" th:selected="${config.enemyFindMode == 0}">从上到下，从左到右</option>
                        <option value="1" th:selected="${config.enemyFindMode == 1}">从下到上，从左到右</option>
                        <option value="2" th:selected="${config.enemyFindMode == 2}">从上到下，从右到左</option>
                        <option value="3" th:selected="${config.enemyFindMode == 3}">从下到上，从右到左</option>
                        <option value="4" th:selected="${config.enemyFindMode == 4}">从中心往外查找</option>
                        <option value="5" th:selected="${config.enemyFindMode == 5}">从左到右，从上到下</option>
                        <option value="6" th:selected="${config.enemyFindMode == 6}">从右到左，从上到下</option>
                        <option value="7" th:selected="${config.enemyFindMode == 7}">从左到右，从下到上</option>
                        <option value="8" th:selected="${config.enemyFindMode == 8}">从右到左，从下到上</option>
                    </select>
                </div>
            </div>
        </div>
        <h2 id="args">启动参数</h2>
        <hr/>
        <div class="col-md-12">
            <div class="form-group">
                <label class="col-md-2 control-label">绑定模式</label>
                <div class="col-md-2">
                    <input class="form-control" type="text" name="bindMode" th:value="${config.bindMode}"/>
                </div>
                <label class="col-md-2 control-label">截屏模式</label>
                <div class="col-md-6">
                    <input class="form-control" name="bindDisplay" th:value="${config.bindDisplay}"/>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">鼠标模式</label>
                <div class="col-md-10">
                    <input class="form-control" name="bindMouse" th:value="${config.bindMouse}"/>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">键盘模式</label>
                <div class="col-md-10">
                    <input class="form-control" name="bindKeypad" th:value="${config.bindKeypad}"/>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">其他属性</label>
                <div class="col-md-10">
                    <input class="form-control" name="bindPublic" th:value="${config.bindPublic}"/>
                </div>
            </div>
        </div>
        <h2 id="other">其他参数</h2>
        <hr/>
        <h3 id="other-attack">出手</h3>
        <div class="col-md-12">
            <div class="form-group">
                <label class="col-md-2 control-label">力度条横坐标</label>
                <div class="col-md-6">
                    <div class="input-group">
                        <span class="input-group-addon">始</span>
                        <input class="form-control" name="strengthStartX" th:value="${config.strengthStartX}"/>
                        <span class="input-group-addon">终</span>
                        <input class="form-control" name="strengthEndX" th:value="${config.strengthEndX}"/>
                    </div>
                </div>
                <label class="col-md-2 control-label">检测点纵坐标</label>
                <div class="col-md-2">
                    <input class="form-control" name="strengthCheckY" th:value="${config.strengthCheckY}"/>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">出手延迟</label>
                <div class="col-md-10">
                    <input class="form-control" name="attackDelay" th:value="${config.attackDelay}"/>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">检测停止颜色</label>
                <div class="col-md-4">
                    <input class="form-control" name="strengthCheckColor" th:value="${config.strengthCheckColor}"/>
                </div>
                <label class="col-md-2 control-label">检测延迟(ms)</label>
                <div class="col-md-4">
                    <input class="form-control" name="strengthCheckDelay" th:value="${config.strengthCheckDelay}"/>
                </div>
            </div>
        </div>
        <h3 id="other-minimap">小地图</h3>
        <div class="col-md-12">
            <div class="form-group">
                <label class="col-md-2 control-label">左上角坐标</label>
                <div class="col-md-4">
                    <div class="input-group">
                        <input class="form-control" name="staticX1" th:value="${config.staticX1}"/>
                        <span class="input-group-addon">px</span>
                        <input class="form-control" name="staticY1" th:value="${config.staticY1}"/>
                        <span class="input-group-addon">px</span>
                    </div>
                </div>
                <label class="col-md-2 control-label">右下角坐标</label>
                <div class="col-md-4">
                    <div class="input-group">
                        <input class="form-control" name="staticX2" th:value="${config.staticX2}"/>
                        <span class="input-group-addon">px</span>
                        <input class="form-control" name="staticY2" th:value="${config.staticY2}"/>
                        <span class="input-group-addon">px</span>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">我的颜色</label>
                <div class="col-md-4">
                    <input class="form-control" name="colorRole" th:value="${config.colorRole}"/>
                </div>
                <label class="col-md-2 control-label">敌人的颜色</label>
                <div class="col-md-4">
                    <input class="form-control" name="colorEnemy" th:value="${config.colorEnemy}"/>
                </div>
            </div>
        </div>
        <h2 id="move">走位</h2>
        <div class="col-md-12">
            <div class="form-group">
                <label class="col-md-2 control-label">
                    找不到位置时
                </label>
                <div class="col-md-10">
                    <select class="form-control">
                        <option>默认走位（2/3向左走，1/3向右走）</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">
                    需调整角度时
                </label>
                <div class="col-md-10">
                    <select class="form-control">
                        <option>默认走位（向目标方向走位并再尝试3次，若仍然失败，则跳过此回合（待修改为飞机））</option>
                    </select>
                </div>
            </div>
        </div>
        <a id="end"></a>
        <div class="col-md-12" >
            <div class="form-group" th:include="*{end}" th:if="*{end != null}">
            </div>
        </div>
    </div>
    <div class="col-md-3" role="complementary">
        <nav id="mini-direct" class="bs-docs-sidebar hidden-print hidden-xs hidden-sm">
            <ul class="nav bs-docs-sidenav">
                <li class="active"><a href="#">添加配置</a></li>
                <li><a href="#base">基础设置</a></li>
                <li>
                    <a href="#rectify">矫正设置</a>
                    <ul class="nav">
                        <li><a href="#rectify-special">特殊</a></li>
                        <li><a href="#rectify-unitDistance">屏距</a></li>
                        <li><a href="#rectify-angle">角度</a></li>
                        <li><a href="#rectify-identify">识别</a></li>
                    </ul>
                </li>
                <li><a href="#args">启动参数</a></li>
                <li>
                    <a href="#other">其他参数</a>
                    <ul class="nav">
                        <li><a href="#other-attack">出手</a></li>
                        <li><a href="#other-minimap">小地图</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#move">走位</a>
                </li>
                <li><a href="#end" th:if="*{end != null}">保存</a></li>
            </ul>
        </nav>
    </div>
    <script>
        $(function () {
            $(".slider-img").each(function (index, element) {
                $(element).rsSliderLens({
                    handle: {
                        zoom: 1.5,
                        pos: 0.5
                    },
                    ruler: {
                        visible: false
                    },
                    onChange: function (event, value, isFirstHandle) {
                        $(event.currentTarget).parent("div").next("input[type='hidden']").val(value);
                    },
                    value: $(element).attr("slider-default")
                });
            });
            $(".handle .slider-img").each(function (index, element) {
                $(element).css("width", "1000%");
            })

            var labels = [];
            for (var i = 0; i <= 3000;) {
                labels.push(i);
                if (i < 500) {
                    i += 50;
                } else if (i < 1000) {
                    i += 100;
                } else if (i < 2000) {
                    i += 200;
                } else {
                    i += 500;
                }
            }
            $(".slider").rsSliderLens({
                step: 1,
                paddingStart: 0.008,
                paddingEnd: 0.008,
                max: 2000,
                height: 48,
                handle: {
                    zoom: 1
                },
                ruler: {
                    labels: {
                        values: labels
                    },
                    tickMarks: {
                        short: {
                            step: 10
                        },
                        long: {
                            step: 50
                        }
                    }
                },
                range: {
                    type: [20, 2000],
                    draggable: true
                },
                value: [[${config.delay}]],
                onFinalChange: function (event, value, isFirstHandle) {
                    $("#delay").val(value);
                }
            })
        })
    </script>
    <script>
        $(function () {
            $('body').scrollspy({target: '#mini-direct'})
            $("#mini-direct").affix({
                offset: {
                    top: 202
                }
            });
        });

    </script>
</div>
</body>
</html>